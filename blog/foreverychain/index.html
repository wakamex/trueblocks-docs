<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=/main.e2ddd8101838c15600e332fc3e5ee77f47a7fbc9a9171da7b6d8e01ffc95479e3b04fa1fc7ac7e0ea71e03c699085ad140147b00675ab93f06ef3887d15710aa.css integrity="sha512-4t3YEBg4wVYA4zL8Pl7nf0en+8mpFx2nttjgH/yVR547BPofx6x+DqceA8aZCFrRQBR7AGdauT8G7ziH0VcQqg==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>forEveryChain - TrueBlocks</title><meta name=description content="Using the new mutli-chain features of TrueBlocks"><link rel=canonical href=/blog/foreverychain/><meta name=twitter:card content="https://trueblocks.io/trueblocks.png"><meta name=twitter:image content="https://trueblocks.io/trueblocks.png"><meta name=twitter:title content="forEveryChain"><meta name=twitter:description content="Using the new mutli-chain features of TrueBlocks"><meta name=twitter:site content="@TrueBlocks"><meta name=twitter:creator content="@TrueBlocks"><meta property="og:title" content="forEveryChain"><meta property="og:description" content="Using the new mutli-chain features of TrueBlocks"><meta property="og:type" content="article"><meta property="og:url" content="/blog/foreverychain/"><meta property="og:image" content="https://trueblocks.io/trueblocks.png"><meta property="article:published_time" content="2022-02-15T10:45:28-04:00"><meta property="article:modified_time" content="2023-01-08T17:12:52-05:00"><meta property="og:site_name" content="TrueBlocks"><meta property="og:locale" content="en_US"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"\/blog\/foreverychain\/"},"headline":"forEveryChain","image":[],"datePublished":"2022-02-15T10:45:28CET","dateModified":"2023-01-08T17:12:52CET","author":{"@type":"Organization","name":"TrueBlocks"},"publisher":{"@type":"Organization","name":"TrueBlocks","logo":{"@type":"ImageObject","url":"\/logo-doks.png"}},"description":"Using the new mutli-chain features of TrueBlocks"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"\/"},{"@type":"ListItem","position":2,"name":"Blogforeverychain","item":"\/blogforeverychain\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest></head><body class="blog single"><div class="header-bar fixed-top"></div><script>(localStorage.getItem("theme")==="dark"||localStorage.getItem("theme")===null)&&document.body.classList.add("dark")</script><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container-fluid><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label>
<a class="navbar-brand order-1 order-md-0 me-auto" href=/>TrueBlocks</a>
<button id=mode class="btn btn-link order-2 order-md-4" type=button aria-label="Toggle mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://twitter.com/trueblocks><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg><span class="ms-2 visually-hidden">Twitter</span></a></li><li class=nav-item><a class=nav-link href=https://discord.com/invite/kAFcZH2x7K><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="simple icon-discord"><path d="M20.317 4.3698a19.7913 19.7913.0 00-4.8851-1.5152.0741.0741.0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868.0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077.0 00-.0785-.037 19.7363 19.7363.0 00-4.8852 1.515.0699.0699.0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824.0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777.0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076.0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077.0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743.0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614.0a.0739.0739.0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077.0 01-.0066.1276 12.2986 12.2986.0 01-1.873.8914.0766.0766.0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076.0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077.0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061.0 00-.0312-.0286zM8.02 15.3312c-1.1825.0-2.1569-1.0857-2.1569-2.419.0-1.3332.9555-2.4189 2.157-2.4189 1.2108.0 2.1757 1.0952 2.1568 2.419.0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748.0c-1.1825.0-2.1569-1.0857-2.1569-2.419.0-1.3332.9554-2.4189 2.1569-2.4189 1.2108.0 2.1757 1.0952 2.1568 2.419.0 1.3332-.946 2.4189-2.1568 2.4189z"/></svg><span class="ms-2 visually-hidden">Discord</span></a></li><li class=nav-item><a class=nav-link href=https://github.com/trueblocks/trueblocks-core><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ms-2 visually-hidden">GitHub</span></a></li><li class=nav-item><a class=nav-link href=/api>API<span class="ms-2 visually-hidden">API</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav me-auto order-5 order-md-2"><li class=nav-item><a class=nav-link href=/docs/>Introduction</a></li><li class=nav-item><a class=nav-link href=/chifra/introduction>Chifra</a></li><li class=nav-item><a class=nav-link href=/data-model/intro>Data Model</a></li><li class=nav-item><a class=nav-link href=/explorer/introduction>Explorer</a></li><li class=nav-item><a class=nav-link href=/sdks/introduction>SDKs</a></li><li class="nav-item active"><a class=nav-link href=/blog/>Blog</a></li><li class=nav-item><a class=nav-link href=/papers/>Papers</a></li></ul><div class="break order-6 d-md-none"></div><form class="navbar-form flex-grow-1 order-7 order-md-3"><input id=userinput class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded"></div></form></div></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-4M60J4ZGSQ"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4M60J4ZGSQ",{anonymize_ip:!1})}</script></header><div class="wrap container-fluid" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><h3>Categories</h3><ul class=list-unstyled><li><a href=/tags/ethereum>ethereum</a> (28)</li><li><a href=/tags/trueblocks>trueblocks</a> (20)</li><li><a href=/tags/community>community</a> (6)</li><li><a href=/tags/tutorials>tutorials</a> (5)</li><li><a href=/tags/faq>faq</a> (1)</li><li><a href=/tags/trueblocks/>trueblocks</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><ul><li><a href=#its-a-multi-chain-world>It’s a Multi-Chain World</a></li><li><a href=#foreverytrace>forEveryTrace</a></li><li><a href=#an-aside-on-the-concept-of-on-the-desktop>An Aside on the Concept of ON THE DESKTOP</a></li><li><a href=#for-every-trace-on-any-chain-in-the-visible-universe>For Every Trace on Any Chain in the Visible Universe</a></li><li><a href=#support-our-work>Support Our Work</a></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><h1>forEveryChain</h1><div class=date><small><em>Published on: </em>Feb 15, 2022
<em>Last edited: </em>Jan 8, 2023</small><br></p></div><p class=lead>Come Visit with Us for a While</p><p>Have you ever had the desire to look at every trace of every transaction of every block on every blockchain? Yes? Well, pull up a chair and visit with us for a while.</p><h3 id=its-a-multi-chain-world>It’s a Multi-Chain World<a href=#its-a-multi-chain-world class=anchor aria-hidden=true>#</a></h3><p>I’m sure many of you are aware of the coming &ldquo;multi-chain&rdquo; universe of blockchains. You know the one. The one where all sorts of little baby communities of people are going to be doing all sorts of little baby community-like things. Charities over here. Games down here. Ultra sophisticated blockchain finance applications up there.</p><p>If you know us at TrueBlocks at all, you know we&rsquo;re decentralization maximalists. That’s why it’s always interested (and perplexed) us how the above multi-chain world can possibly remain decentralized.</p><p>This week we took a stab at trying answering that question by adding a new feature to TrueBlocks that we call <strong>multi-chain support</strong>. This feature seems relatively simple on its face — a user only has to add <code>--chain &lt;whatever></code> to any of his/her chifra command lines — but it opens up a whole new world of possibilities (and headaches) — but&mldr;</p><pre><code>OUR CODE STILL WORKS ON A DESKTOP      ← this should be our new logo!
</code></pre><p>In this article, I want to show you an example of one of the new possibilities we&rsquo;ve seen with this new code.</p><p>I’ll start by explaining an existing example from our example code called forEveryTrace.</p><p>This example visits every block in the Ethereum Mainnet, and from there every transaction in every block, and from there every trace in every transaction in every block.</p><p>I conclude the article by talking about a new bit of code we wrote called <code>forEveryChain</code> which came into existence literally ten minutes ago and inspired this post.</p><h3 id=foreverytrace>forEveryTrace<a href=#foreverytrace class=anchor aria-hidden=true>#</a></h3><p>We assume a certain amount of familiarity with TrueBlocks in particular how to <a href=https://trueblocks.io/docs/install/install-core.md>install it and get it running</a>. We also assume you have access to your own node software. We highly recommend <a href=https://github.com/ledgerwatch/erigon>Erigon</a> running locally, and while the following code will work with Infura, you may not want to do that, as it will definitely get you rate limited. Don’t say we didn’t warn you.</p><p>In our repo there’s a folder called <code>./examples</code> and in that folder, there’s an example in a sub-folder called <code>./forEvery</code>. This is the contents of the code in the folder:</p><img src=https://miro.medium.com/max/1400/1*bYH13f6MYqetjD_NTVHxXg.png width=640px><p><p>If you’re familiar with C++ code at all, you’ll notice the <code>main</code> function at <strong>line 34</strong> is really simple. Initialize the library, call a single function, clean up, and finish.</p><p>While simple, that one function packs a wallop. It does exactly as it says, it visits every block in the entire blockchain it’s configured for. (By default TrueBlocks is configured to run against Ethereum Mainnet, but we’ll get back to this in a minute.)</p><p>What line 38 does is:</p><pre><code>For every block in the current blockchain,
  call the function visitBlock (line 29) and pass it a pointer to counter.
</code></pre><p>What does the visitBlock function do?</p><pre><code>For every transaction in the given block,
  call the function visitTransaction (line 24) passing in the same pointer.
</code></pre><p>What does the function visitTransaction do?</p><pre><code>For every trace in the given transaction,
  call the function visitTrace (line 16) passing in the same pointer.
</code></pre><p>And finally, what does visitTrace do?</p><pre><code>It keeps a count of the total number of traces in the entire blockchain and prints out each trace.
</code></pre><h3 id=an-aside-on-the-concept-of-on-the-desktop>An Aside on the Concept of ON THE DESKTOP<a href=#an-aside-on-the-concept-of-on-the-desktop class=anchor aria-hidden=true>#</a></h3><p>If you look carefully at this code, you’ll understand a little bit of why TrueBlocks still works on the desktop even after more than 14,000,000 Mainnet blocks.</p><p>We’re not extracting any permanent data from the chain.</p><p>While TrueBlocks provides for a binary cache that speeds up processing many times over raw node queries, the cache is optional. The cache is only employed if the end-user instructs us to use the cache.</p><p>We leave the decision of whether or not to cache to you. This is markedly different from any other solution we’re aware of and it’s why we still work on a desktop.</p><p>If you want to cache the entire blockchain because that’s your requirement — the first thing you have to do is get a really, really large hard drive — and then alter the above code to write each block, transaction, or trace to either our cache or your database.</p><p>This is the exact problem we have with solutions such as AmberData and EtherScan. They’ve chosen to extract and cache every single piece of data on the entire blockchain prior to the developer’s decision if it’s pertinent. This creates many, many Terabytes of data which means their solutions will never work on a desktop and therefore will never be truly decentralized. Enough soapbox — back to the point.</p><h3 id=for-every-trace-on-any-chain-in-the-visible-universe>For Every Trace on Any Chain in the Visible Universe<a href=#for-every-trace-on-any-chain-in-the-visible-universe class=anchor aria-hidden=true>#</a></h3><p>As I mentioned above, this week we added a multi-chain feature to TrueBlocks which means we can process queries for any EVM-based blockchain with the same equal ease as we process Mainnet.</p><p>I was inspired to write this post because I thought of the following modification to the above example.</p><img src=https://miro.medium.com/max/1400/1*Qt-bK1e_eQHetmAZcsWAhA.png width=640px><p><p>What does this actually do?</p><pre><code>It visits
  every trace
    in every transaction
      in every block
        on any EVM-based blockchain
  ON A FUCKING DESKTOP.
</code></pre><p>That&rsquo;s important. You can it by yourself. All you have to do is run your own nodes and run TrueBlocks.</p><h3 id=support-our-work>Support Our Work<a href=#support-our-work class=anchor aria-hidden=true>#</a></h3><p>TrueBlocks is self-funded from our own personal funds and grants from our supporters including The Etheruem Foundation (2018), Consensys (2019), Moloch DAO (2021), and most recently Filecoin/IPFS (2021).</p><p>And you!</p><p>If you like this article and wish to support please donate to our GitCoin grant https://gitcoin.co/grants/184/trueblocks. Donate during the next matching round, and we get the added benefit of the matching grants. Even small amounts have a big impact.</p><p>If you’d rather, feel free to send ETH or any other token to us directly at trueblocks.eth or 0xf503017d7baf7fbc0fff7492b751025c6a78179b.</p><p class=edit-page><a href=https://github.com/TrueBlocks/trueblocks-docs/blob/master/content/blog/2022/054-forEveryChain.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Edit this page on GitHub</a></p><div class="docs-navigation d-flex justify-content-between"><a href=/blog/faq/><div class="card my-1"><div class="card-body py-2">&larr; FAQ</div></div></a><a class=ms-auto href=/blog/installing-erigon-and-trueblocks-as-services-on-ubuntu/><div class="card my-1"><div class="card-body py-2">Installing Erigon and TrueBlocks as Services on Ubuntu &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a href=https://gohugo.io/>Hugo</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline><li class=list-inline-item><a href=https://github.com/TrueBlocks/trueblocks-docs>Improve docs</a></li><li class=list-inline-item><a href=/privacy-policy/>Privacy</a></li></ul></div></div></div></footer><script src=/js/highlight.min.39c8701213290bff3f62f8bd4a85d5a89866c0e28d00395817ab598ba2b45df2cb63eb9afb36d0b00e8f6665d8baf67a2feb26a04839b46dfb9b18ed5bcebd44.js integrity="sha512-OchwEhMpC/8/Yvi9SoXVqJhmwOKNADlYF6tZi6K0XfLLY+ua+zbQsA6PZmXYuvZ6L+smoEg5tG37mxjtW869RA==" crossorigin=anonymous defer></script>
<script src=/main.min.faf5ce2fa16540fed2aa52654dcbc4d344816d8672fc99d99304faa64ddbac891a7d0e3e47633606fcdcd9fa6294254d76b3e9bfe4b3b55ef761780ee819898a.js integrity="sha512-+vXOL6FlQP7SqlJlTcvE00SBbYZy/JnZkwT6pk3brIkafQ4+R2M2Bvzc2fpilCVNdrPpv+SztV73YXgO6BmJig==" crossorigin=anonymous defer></script>
<script src=/index.min.ecf5abb7b18239119e9954b1777e59b327a280d0e505d51d9fca8fa883add071e58656a001826cbba414ac14219532f9b3ff8d4a499471f921c4e9709df02bf5.js integrity="sha512-7PWrt7GCORGemVSxd35ZsyeigNDlBdUdn8qPqIOt0HHlhlagAYJsu6QUrBQhlTL5s/+NSkmUcfkhxOlwnfAr9Q==" crossorigin=anonymous defer></script></body></html>