<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=/main.e39e042e7eec95d16dbea72fab25218b73658bf732fcb20cb9254834001d874f4f41c07c7fdba542f90cb97f0678800780da41acb448a0ef8e5222d38cd7b5e2.css integrity="sha512-454ELn7sldFtvqcvqyUhi3Nli/cy/LIMuSVINAAdh09PQcB8f9ulQvkMuX8GeIAHgNpBrLRIoO+OUiLTjNe14g==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Running Against Multiple Rpc Endpoints - TrueBlocks</title><meta name=description content="Running Against Multiple Rpc Endpoints"><link rel=canonical href=/blog/running-against-multiple-rpc-endpoints/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://trueblocks.io/trueblocks.png"><meta name=twitter:title content="Running Against Multiple Rpc Endpoints"><meta name=twitter:description content="Running Against Multiple Rpc Endpoints"><meta name=twitter:site content="@TrueBlocks"><meta name=twitter:creator content="@TrueBlocks"><meta property="og:title" content="Running Against Multiple Rpc Endpoints"><meta property="og:description" content="Running Against Multiple Rpc Endpoints"><meta property="og:type" content="article"><meta property="og:url" content="/blog/running-against-multiple-rpc-endpoints/"><meta property="og:image" content="/blog/running-against-multiple-rpc-endpoints/running-against-mutliple-rpc-endpoints.jpg"><meta property="article:published_time" content="2021-04-21T17:13:04-04:00"><meta property="article:modified_time" content="2023-01-08T17:12:52-05:00"><meta property="og:site_name" content="TrueBlocks"><meta property="og:locale" content="en_US"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"\/blog\/running-against-multiple-rpc-endpoints\/"},"headline":"Running Against Multiple Rpc Endpoints","image":["/blog/running-against-multiple-rpc-endpoints/running-against-mutliple-rpc-endpoints.jpg"],"datePublished":"2021-04-21T17:13:04CET","dateModified":"2023-01-08T17:12:52CET","author":{"@type":"Organization","name":"TrueBlocks"},"publisher":{"@type":"Organization","name":"TrueBlocks","logo":{"@type":"ImageObject","url":"\/logo-doks.png"}},"description":"Running Against Multiple Rpc Endpoints"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"\/"},{"@type":"ListItem","position":2,"name":"Blogrunning Against Multiple Rpc Endpoints","item":"\/blogrunning-against-multiple-rpc-endpoints\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest></head><body class="blog single"><div class="header-bar fixed-top"></div><script>(localStorage.getItem("theme")==="dark"||localStorage.getItem("theme")===null)&&document.body.classList.add("dark")</script><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container-fluid><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label>
<a class="navbar-brand order-1 order-md-0 me-auto" href=/>TrueBlocks</a>
<button id=mode class="btn btn-link order-2 order-md-4" type=button aria-label="Toggle mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://twitter.com/trueblocks><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg><span class="ms-2 visually-hidden">Twitter</span></a></li><li class=nav-item><a class=nav-link href=https://discord.com/invite/kAFcZH2x7K><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="simple icon-discord"><path d="M20.317 4.3698a19.7913 19.7913.0 00-4.8851-1.5152.0741.0741.0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868.0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077.0 00-.0785-.037 19.7363 19.7363.0 00-4.8852 1.515.0699.0699.0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824.0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777.0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076.0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077.0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743.0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614.0a.0739.0739.0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077.0 01-.0066.1276 12.2986 12.2986.0 01-1.873.8914.0766.0766.0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076.0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077.0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061.0 00-.0312-.0286zM8.02 15.3312c-1.1825.0-2.1569-1.0857-2.1569-2.419.0-1.3332.9555-2.4189 2.157-2.4189 1.2108.0 2.1757 1.0952 2.1568 2.419.0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748.0c-1.1825.0-2.1569-1.0857-2.1569-2.419.0-1.3332.9554-2.4189 2.1569-2.4189 1.2108.0 2.1757 1.0952 2.1568 2.419.0 1.3332-.946 2.4189-2.1568 2.4189z"/></svg><span class="ms-2 visually-hidden">Discord</span></a></li><li class=nav-item><a class=nav-link href=https://github.com/trueblocks/trueblocks-core><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ms-2 visually-hidden">GitHub</span></a></li><li class=nav-item><a class=nav-link href=/api>API<span class="ms-2 visually-hidden">API</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav me-auto order-5 order-md-2"><li class=nav-item><a class=nav-link href=/docs/>Introduction</a></li><li class=nav-item><a class=nav-link href=/chifra/introduction>Chifra</a></li><li class=nav-item><a class=nav-link href=/data-model/intro>Model</a></li><li class=nav-item><a class=nav-link href=/explorer/introduction>Explorer</a></li><li class=nav-item><a class=nav-link href=/sdks/introduction>SDKs</a></li><li class="nav-item active"><a class=nav-link href=/blog/>Blog</a></li><li class=nav-item><a class=nav-link href=/papers/>Papers</a></li></ul><div class="break order-6 d-md-none"></div><form class="navbar-form flex-grow-1 order-7 order-md-3"><input id=userinput class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded"></div></form></div></div><script async src="https://www.googletagmanager.com/gtag/js?id=G-4M60J4ZGSQ"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4M60J4ZGSQ",{anonymize_ip:!1})}</script></header><div class="wrap container-fluid" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><h3>Categories</h3><ul class=list-unstyled><li><a href=/tags/ethereum>ethereum</a> (28)</li><li><a href=/tags/trueblocks>trueblocks</a> (20)</li><li><a href=/tags/community>community</a> (6)</li><li><a href=/tags/tutorials>tutorials</a> (5)</li><li><a href=/tags/faq>faq</a> (1)</li><li><a href=/tags/tutorials/>tutorials</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#preliminaries>Preliminaries</a></li><li><a href=#customizing-the-rpc-endpoint>Customizing the RPC Endpoint</a></li><li><a href=#running-against-different-rpc-endpoints>Running Against Different RPC Endpoints</a></li><li><a href=#upshot>Upshot</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><h1>Running Against Multiple Rpc Endpoints</h1><div class=date><small><em>Published on: </em>Apr 21, 2021
<em>Last edited: </em>Jan 8, 2023</small><br></p></div><p class=lead>Can I run against different RPC endpoints?</p><p>One user asked if it was possible to run TrueBlocks against multiple RPC endpoints at the same time. This is short recipe to accomplish just that.</p><h2 id=preliminaries>Preliminaries<a href=#preliminaries class=anchor aria-hidden=true>#</a></h2><p>The first thing to understand is that the TrueBlocks core runs against a local configuration file stored in your $HOME folder called <code>$HOME/.local/share/TrueBlocks/trueBlocks.toml</code>. It&rsquo;s an almost ridiculously simple file.</p><p>The file gets created and populated with default values the first time you build TrueBlocks. When you do <code>cmake ../src</code> and then <code>make</code> in the build folder of the TrueBlocks repo, you can look inside the file <code>$HOME/.local/share/trueblocks/trueBlocks.toml</code>.</p><p>You will see something like this:</p><pre><code class=language-[toml]>[settings]
rpcProvider = &quot;http://localhost:8545&quot;
cachePath = &quot;~/.local/share/trueblocks/trueBlocks/cache/mainnet/&quot;
</code></pre><p>or something similar. This is a standard TOML with a heading or group for each set of unique keys and key / value pairs defining the options. While each tool and application in TrueBlocks has its own configuration file, the main options are stored in the <code>trueBlocks.toml</code> file. See the documentation for more information.</p><h2 id=customizing-the-rpc-endpoint>Customizing the RPC Endpoint<a href=#customizing-the-rpc-endpoint class=anchor aria-hidden=true>#</a></h2><p>Unless you&rsquo;re running your own node, you will have to customize the value of the <code>rpcProvider</code> variable. For example, if you use Infura as your node provider, you will get an Infura endpoint along with your Infura API key. You may enter that value in this file to give TrueBlocks direction in where to look for the RPC data.</p><p>We recommend you put the value in quotes, although this is optional.</p><p>In general operation, you can modify the <code>rpcProvider</code> value once and from then on, every time TrueBlocks interacts with the node, it will use that value.</p><p>In the case of our user, he/she wished to run two copies of TrueBlocks against two different RPC endpoints. What do to?</p><h2 id=running-against-different-rpc-endpoints>Running Against Different RPC Endpoints<a href=#running-against-different-rpc-endpoints class=anchor aria-hidden=true>#</a></h2><p>Every setting in any of the TrueBlocks configuration files is a key / value pair that lives under a group header (as is standard TOML). In the case of the <code>rpcProvider</code> the key is <code>rpcProvider</code> and the heading is <code>settings</code>.</p><p>Whenever you&rsquo;re running any of the TrueBlocks tools or applications, if you&rsquo;re starting them from the command line, you can customize a setting by exporting an environment variable prior to running the command.</p><p>An easy way to demostrate this is with the <code>chifra status</code> command.</p><p>Open a terminal window and navigate to the TrueBlocks <code>./build</code> folder that you created when first installing and building TrueBlocks. Run a test command just to prove you&rsquo;re working with a valid RPC provider already:</p><pre><code class=language-[bash]>chifra blocks 12
</code></pre><p>This should return valid JSON. If not, go back to the initial installation and build instructions and make sure you&rsquo;re able to see valid data from the node.</p><p>Assuming you have a valid RPC endpoint, do this from the same folder:</p><pre><code class=language-[bash]>&gt; chifra status | head
</code></pre><p>(We pipe through <code>head</code> to show the only the first few lines.) You should get a response similar to this one:</p><pre><code class=language-[json]>{
  &quot;client_version&quot;: &quot;OpenEthereum//v3.2.3-stable-a716eb3-20210415/x86_64-linux-gnu/rustc1.51.0&quot;,
  &quot;client_ids&quot;: &quot;chainId: 1 networkId: 1&quot;,
  &quot;trueblocks_version&quot;: &quot;GHC-TrueBlocks//0.8.5-alpha-f795c80d9-20210421&quot;,
  &quot;rpc_provider&quot;: &quot;http://localhost:36963&quot;,
  ....
</code></pre><p>Now do this (this works for <code>bash</code>, adjust for your own shell. We assume your providing a valid RPC endpoint):</p><pre><code class=language-[bash]>&gt; export SETTINGS_RPCPROVIDER=&quot;http://localhost:23456&quot;
&gt; chifra status | head
</code></pre><pre><code class=language-[json]>{
  &quot;client_version&quot;: &quot;OpenEthereum//v3.2.3-stable-a716eb3-20210415/x86_64-linux-gnu/rustc1.51.0&quot;,
  &quot;client_ids&quot;: &quot;chainId: 1 networkId: 1&quot;,
  &quot;trueblocks_version&quot;: &quot;GHC-TrueBlocks//0.8.5-alpha-f795c80d9-20210421&quot;,
  &quot;rpc_provider&quot;: &quot;http://localhost:23456&quot;,
  ....
</code></pre><p>You should get a different results.</p><h2 id=upshot>Upshot<a href=#upshot class=anchor aria-hidden=true>#</a></h2><p>Any configuration value for any tool or application may be customized in the environment by specify a new value using the item&rsquo;s group and key, thus:</p><pre><code>export GROUP_KEY = &lt;new value&gt;
</code></pre><p>In our case, group was &lsquo;settings&rsquo;, key was &lsquo;rpcProvider&rsquo;, so the environment variable was &lsquo;SETTINGS_RPCPROVIDER&rsquo;.</p><p>Simple enough. Recipe done.</p><p>Cheers.</p><p class=edit-page><a href=https://github.com/TrueBlocks/trueblocks-docs/blob/master/content/blog/2021/047-running-against-mutliple-rpc-endpoints.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Edit this page on GitHub</a></p><div class="docs-navigation d-flex justify-content-between"><a href=/blog/recipe-list-tokens-i-own/><div class="card my-1"><div class="card-body py-2">&larr; Recipe: List Tokens I Own</div></div></a><a class=ms-auto href=/blog/showing-erc-20-transfers/><div class="card my-1"><div class="card-body py-2">Showing ERC-20 Transfers &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a href=https://gohugo.io/>Hugo</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline><li class=list-inline-item><a href=https://github.com/TrueBlocks/trueblocks-docs>Improve docs</a></li><li class=list-inline-item><a href=/privacy-policy/>Privacy</a></li></ul></div></div></div></footer><script src=/js/highlight.min.39c8701213290bff3f62f8bd4a85d5a89866c0e28d00395817ab598ba2b45df2cb63eb9afb36d0b00e8f6665d8baf67a2feb26a04839b46dfb9b18ed5bcebd44.js integrity="sha512-OchwEhMpC/8/Yvi9SoXVqJhmwOKNADlYF6tZi6K0XfLLY+ua+zbQsA6PZmXYuvZ6L+smoEg5tG37mxjtW869RA==" crossorigin=anonymous defer></script>
<script src=/main.min.faf5ce2fa16540fed2aa52654dcbc4d344816d8672fc99d99304faa64ddbac891a7d0e3e47633606fcdcd9fa6294254d76b3e9bfe4b3b55ef761780ee819898a.js integrity="sha512-+vXOL6FlQP7SqlJlTcvE00SBbYZy/JnZkwT6pk3brIkafQ4+R2M2Bvzc2fpilCVNdrPpv+SztV73YXgO6BmJig==" crossorigin=anonymous defer></script>
<script src=/index.min.ecf5abb7b18239119e9954b1777e59b327a280d0e505d51d9fca8fa883add071e58656a001826cbba414ac14219532f9b3ff8d4a499471f921c4e9709df02bf5.js integrity="sha512-7PWrt7GCORGemVSxd35ZsyeigNDlBdUdn8qPqIOt0HHlhlagAYJsu6QUrBQhlTL5s/+NSkmUcfkhxOlwnfAr9Q==" crossorigin=anonymous defer></script></body></html>